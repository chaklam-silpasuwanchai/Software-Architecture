(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{440:function(s,t,a){"use strict";a.r(t);var e=a(54),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"getting-start-with-csim-vm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-start-with-csim-vm"}},[s._v("#")]),s._v(" Getting start with CSIM VM")]),s._v(" "),a("p",[a("em",[s._v("If you have been using CSIM VM before, this will not benefit you.")])]),s._v(" "),a("p",[s._v("To set up your VMs, you have to do it on VMware ESXi which you can access it via "),a("code",[s._v("https://virtual3.cs.ait.ac.th")]),s._v(". However, the "),a("code",[s._v("virtual3.cs.ait.ac.th")]),s._v(" server lives under CSIM network.")]),s._v(" "),a("h2",{attrs:{id:"are-you-under-csim-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#are-you-under-csim-network"}},[s._v("#")]),s._v(" Are you under CSIM network?")]),s._v(" "),a("p",[s._v("CSIM has its own network. The network has a single public IP. This means, most of the server under CSIM network must use CSIM private IP. The reason why we can connect to CSIM server from anywhere in the world is because Olivier set DNS and NAT. blah blah blah network boring stuff.")]),s._v(" "),a("p",[s._v("In summary, "),a("code",[s._v("virtual3.cs.ait.ac.th")]),s._v(" is not set any of that. Therefore, accessing this server requires a bit of trick (given that you are not in CSIM).")]),s._v(" "),a("p",[s._v("The trick we are going to do has a name "),a("code",[s._v("ssh tunneling")]),s._v(". Luckily, it is not something difficult to do.")]),s._v(" "),a("p",[s._v("The idea is as follows;")]),s._v(" "),a("ol",[a("li",[s._v("CSIM has a server named "),a("code",[s._v("bazooka")]),s._v(". This server can be accessed from anywhere in the world and you already have an account (which is your CSIM account).")]),s._v(" "),a("li",[s._v("We ask "),a("code",[s._v("bazooka")]),s._v(" to send/fetch an information of "),a("code",[s._v("virtual3.cs.ait.ac.th")]),s._v(" for us. This is easily can be seee as one variant of proxy.")])]),s._v(" "),a("p",[s._v("The command we ase using is "),a("code",[s._v("ssh <stxxxx>@bazooka.cs.ait.ac.th -L 8000:virtual3.cs.ait.ac.th:443")]),s._v(".\nThere are three arguments and one option.")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("ssh")]),s._v(" is the command for secure shell protocol.")]),s._v(" "),a("li",[a("code",[s._v("<stxxxx>@bazooka.cs.ait.ac.th")]),s._v(" is the destination of the ssh. "),a("code",[s._v("<stxxxxxx>")]),s._v(" is the user of that server and "),a("code",[s._v("bazooka.cs.ait.ac.th")]),s._v(" is the server url.")]),s._v(" "),a("li",[a("code",[s._v("-L")]),s._v(" is an option for tunnelling")]),s._v(" "),a("li",[a("code",[s._v("8000:virtual3.cs.ait.ac.th:443:")]),s._v(" is the argument of the tunnelling. The template is "),a("code",[s._v("<source port>:<tunnel to server>:<destination port>")]),s._v(". In our case, I want to access "),a("code",[s._v("virtual3.cs.ait.ac.th")]),s._v(" port "),a("code",[s._v("443")]),s._v(" and I will go to that port on my machine using "),a("code",[s._v("8000")]),s._v(".")])]),s._v(" "),a("p",[s._v("Once you run the command, you will have to enter the CSIM password and just leave the ssh session online. Then you can access the "),a("code",[s._v("https://virtual3.cs.ait.ac.th/")]),s._v(" using "),a("code",[s._v("https://localhost:8000")]),s._v(" on your machine.")]),s._v(" "),a("h2",{attrs:{id:"vms-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vms-information"}},[s._v("#")]),s._v(" VMs information")]),s._v(" "),a("div",{staticClass:"language-txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-txt"}},[a("code",[s._v("netmask: 255.255.255.0\nDNS: 192.41.170.15\ngateway: 192.41.170.23\nproxy: http://192.41.170.23:3128/\n\nta-a   : 192.41.170.112\nta-b   : 192.41.170.113\n-- Permission: st121413, st121723\n\nsad1-a : 192.41.170.114\nsad1-b : 192.41.170.115\n-- Permission: st122797,st122038,st122037,st121410\n\nsad2-a : 192.41.170.116\nsad2-b : 192.41.170.117\n-- Permission: st122283,st122331,st122050\n\nsad3-a : 192.41.170.118\nsad3-b : 192.41.170.119\n-- Permission: st122895,st122032,st122928\n\nsad4-a : 192.41.170.120\nsad4-b : 192.41.170.121\n-- Permission: st122561,st122322,st122825\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h2",{attrs:{id:"configuring-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-ssh"}},[s._v("#")]),s._v(" Configuring SSH")]),s._v(" "),a("p",[s._v("In order for our server to serve "),a("code",[s._v("ssh")]),s._v(", we have to install "),a("code",[s._v("openssh")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssh-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Now, we will ask the "),a("code",[s._v("openssh-server")]),s._v(" to run on boot (it would be unfortunate if you can not access your server once it is rebooted).")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"configuring-internet-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-internet-proxy"}},[s._v("#")]),s._v(" Configuring internet proxy")]),s._v(" "),a("p",[s._v("Remember, the IPs is only allowed in-coming 80,443,8000-8010. This means we can not ssh (22) to our server directly. Even worst, the server is not allowed to go out of CSIM network. Unless, we set the internet proxy on our server.")]),s._v(" "),a("p",[s._v("The first two proxies we have to set is for the (1) bash session and (2) apt service. There are no gurantee that all service will use the proxy so good luck.")]),s._v(" "),a("h3",{attrs:{id:"_1-bash-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-bash-proxy"}},[s._v("#")]),s._v(" 1. bash proxy")]),s._v(" "),a("p",[s._v("This is easy, we set this as environment variable in the account we are using.")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export http_proxy=\"http://192.41.170.23:3128\"'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bashrc\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export https_proxy=\"http://192.41.170.23:3128\"'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bashrc\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bashrc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("Verify that you are now able to use internet by using "),a("code",[s._v("wget")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" www.google.com\n--2022-02-22 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":01:12--  http://www.google.com/\nConnecting to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.41")]),s._v(".170.23:3128"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". connected.\nProxy request sent, awaiting response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nLength: unspecified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("text/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nSaving to: ‘index.html’\n\nindex.html             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(".91K  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("87")]),s._v(".7KB/s    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".2s    \n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-02-22 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":01:12 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("87.7")]),s._v(" KB/s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - ‘index.html.1’ saved "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17319")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_2-apt-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-apt-proxy"}},[s._v("#")]),s._v(" 2. apt proxy")]),s._v(" "),a("p",[s._v("This is also not difficult. Just add the proxy "),a("a",{attrs:{href:"https://www.serverlab.ca/tutorials/linux/administration-linux/how-to-set-the-proxy-for-apt-for-ubuntu-18-04/",target:"_blank",rel:"noopener noreferrer"}},[s._v("ref"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /etc/apt/apt.conf.d/proxy.conf\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Acquire::http::Proxy \"http://192.41.170.23:3128\";'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/apt/apt.conf.d/proxy.conf\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Acquire::https::Proxy \"http://192.41.170.23:3128\";'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/apt/apt.conf.d/proxy.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("hr"),s._v(" "),a("p",[s._v("Now, you are set to go dev.")])])}),[],!1,null,null,null);t.default=n.exports}}]);